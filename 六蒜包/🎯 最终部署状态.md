# 六蒜包·餐車訂購表單 - 最終部署狀態

## ✅ 已完成配置

### 1. 前端已配置完成
- ✅ **API 網址已填入**
  ```
  https://script.google.com/macros/s/AKfycbwrdqqbGunXTFElzm-urbkFnysLDUBabn2nzROKm2jkoJs0QfK96UI4jVjt_cAHYW8p/exec
  ```
- ✅ **品牌名稱：** 六蒜包·餐車
- ✅ **網站ID：** WEB002
- ✅ **商品類型：** 烘焙糕點
- ✅ **載入圖示：** 🥐（麵包）
- ✅ **Logo：** 麵包圖片

### 2. Google Sheets 已連結
- ✅ **Sheets ID：** `1gf21nUj_4HTLK0zVgAb2CsHbRxcphQFdoe2LpJydjGg`
- ✅ **網址：** https://docs.google.com/spreadsheets/d/1gf21nUj_4HTLK0zVgAb2CsHbRxcphQFdoe2LpJydjGg/edit

### 3. 後端 API 已部署
- ✅ **部署網址：** https://script.google.com/macros/s/AKfycbwrdqqbGunXTFElzm-urbkFnysLDUBabn2nzROKm2jkoJs0QfK96UI4jVjt_cAHYW8p/exec
- ✅ **測試結果：** API 正常運作（返回 `{"ok":false,"msg":"未知的請求"}`，表示 API 已啟動）

---

## 📋 必須完成的工作表設置

### ⚠️ 當前狀態檢查

您的 Google Sheets 需要以下工作表：

#### 核心工作表（必須）
1. ✅ **場地清單**
   - 定義所有營業場地
   - 欄位：場地代碼、場地名稱、狀態

2. ✅ **系統設定**
   - 營業時間、取餐方式等
   - 欄位：設定項目、值

#### 場地專屬工作表（每個場地需要 2 個）

**假設您有 3 個場地（中山店、板橋店、新竹店）：**

3. ✅ **中山店_庫存管理**
4. ✅ **中山店_訂單記錄**
5. ✅ **板橋店_庫存管理**
6. ✅ **板橋店_訂單記錄**
7. ✅ **新竹店_庫存管理**
8. ✅ **新竹店_訂單記錄**

**總共：** 8 個工作表（2個核心 + 3個場地 × 2）

---

## 🚀 立即要做的事

### 步驟 1：建立所有工作表

**使用 `多場地快速複製數據.txt`**

1. 打開您的 Google Sheets
2. 按照順序建立 8 個工作表
3. 複製貼上對應的數據

**⚠️ 重要：**
- 工作表名稱必須**完全一致**（包括中文字、底線）
- 例如：`中山店_庫存管理`（不是「中山店 _庫存管理」或「中山店_库存管理」）

---

### 步驟 2：測試系統

1. **打開 `index.html`（用瀏覽器）**

2. **應該看到：**
   - ✅ 品牌名稱：「六蒜包·餐車」
   - ✅ 載入圖示：🥐
   - ✅ 場地選擇下拉選單（如果後端已設置）
   - ✅ 商品列表（從後端載入）

3. **測試流程：**
   - 選擇取餐場地（例如：中山店）
   - 選擇商品（增加數量）
   - 填寫姓名、電話
   - 選擇取餐時間
   - 點擊「送出訂單」

4. **檢查結果：**
   - 前端應顯示：「✅ 訂單已送出！訂單編號：1019-A-001」
   - Google Sheets 應新增一筆訂單到「中山店_訂單記錄」
   - 「中山店_庫存管理」的庫存應自動扣減

---

## 🔍 系統測試 API

### 測試 1：取得系統設定
```
https://script.google.com/macros/s/AKfycbwrdqqbGunXTFElzm-urbkFnysLDUBabn2nzROKm2jkoJs0QfK96UI4jVjt_cAHYW8p/exec?action=getConfig
```

**應該返回：**
```json
{
  "ok": true,
  "config": {...},
  "timeOptions": {...},
  "methodOptions": [...],
  "venueOptions": [...]
}
```

### 測試 2：取得場地清單
```
https://script.google.com/macros/s/AKfycbwrdqqbGunXTFElzm-urbkFnysLDUBabn2nzROKm2jkoJs0QfK96UI4jVjt_cAHYW8p/exec?action=getVenues
```

**應該返回：**
```json
{
  "ok": true,
  "venues": [
    {"code": "venue_A", "name": "中山店", "status": "營業中"},
    {"code": "venue_B", "name": "板橋店", "status": "營業中"},
    ...
  ]
}
```

### 測試 3：取得場地庫存（例如：中山店）
```
https://script.google.com/macros/s/AKfycbwrdqqbGunXTFElzm-urbkFnysLDUBabn2nzROKm2jkoJs0QfK96UI4jVjt_cAHYW8p/exec?action=getInventory&venue=venue_A
```

**應該返回：**
```json
{
  "ok": true,
  "inventory": {
    "六蒜包": {
      "type": "main",
      "stock": 100,
      "initialStock": 100,
      "available": true,
      ...
    },
    ...
  },
  "mainItems": [...],
  "categories": {...}
}
```

---

## ❌ 常見錯誤排查

### 錯誤 1：場地選擇沒有選項

**原因：** 「場地清單」工作表未建立或數據錯誤

**解決：**
1. 確認有「場地清單」工作表
2. 確認 A 欄有場地代碼（venue_A, venue_B 等）
3. 確認 B 欄有場地名稱（中山店、板橋店等）
4. 在瀏覽器測試：訪問 API + `?action=getConfig`

---

### 錯誤 2：選擇場地後沒有商品

**原因：** 該場地的庫存管理表未建立

**解決：**
1. 確認有「{場地名}_庫存管理」工作表
2. 工作表名稱必須與「場地清單」B 欄完全一致
3. 例如：場地清單 B2 = 「中山店」→ 工作表名稱 = 「中山店_庫存管理」

---

### 錯誤 3：訂單提交失敗

**原因：** 該場地的訂單記錄表未建立

**解決：**
1. 確認有「{場地名}_訂單記錄」工作表
2. 確認標題行已設置（16 個欄位）

---

### 錯誤 4：庫存不扣減

**原因：** 庫存表欄位結構錯誤

**解決：**
確認庫存管理表結構：
- A 欄：商品名稱
- B 欄：類型（main/side）
- C 欄：當前庫存（數字）
- D 欄：初始庫存（數字）
- E 欄：狀態
- F 欄：分類
- G 欄：圖片網址

---

## 📂 系統文件清單

### 🔥 立即使用
- **多場地快速複製數據.txt** ⭐⭐⭐⭐⭐（複製所有工作表數據）
- **Google_Apps_Script_後端_多場地版.js** ⭐⭐⭐⭐（完整後端代碼）
- **多場地工作表設置指南.md** ⭐⭐⭐⭐（詳細說明）

### 📖 參考文件
- 工作表完整設置指南.md
- 快速開始.md
- 部署指南.md
- README.md

---

## ✅ 下一步檢查清單

完成以下步驟後，系統即可正常運作：

- [ ] 打開 Google Sheets，建立「場地清單」工作表
- [ ] 建立「系統設定」工作表
- [ ] 為每個場地建立「{場地名}_庫存管理」
- [ ] 為每個場地建立「{場地名}_訂單記錄」
- [ ] 用瀏覽器打開 index.html
- [ ] 選擇場地，檢查是否載入商品
- [ ] 提交測試訂單
- [ ] 檢查訂單是否寫入對應的訂單記錄表
- [ ] 檢查庫存是否自動扣減

---

## 🎯 快速啟動

1. **建立工作表** → 打開 `多場地快速複製數據.txt`
2. **複製貼上數據** → 按順序建立 8 個工作表
3. **打開 index.html** → 用瀏覽器測試
4. **測試下單** → 選擇場地 → 下單 → 檢查

---

## 📞 技術支援

- **LINE：** https://lin.ee/YyXagFg
- **網站ID：** WEB002
- **Sheets ID：** 1gf21nUj_4HTLK0zVgAb2CsHbRxcphQFdoe2LpJydjGg

---

**系統已準備就緒！現在開始建立工作表吧！** 🚀

**參考文件：** `多場地快速複製數據.txt` ⭐⭐⭐⭐⭐

